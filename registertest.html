<html>
    <head>
        <title> REGISTER </title>
<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <!-- <link rel="stylesheet" type="text/css" href="register_design.css">-->
       
       


    </head>
 

    <body class="body_design">
           <nav>
    <label class="logo" >INCOME TAX MANAGEMENT SYSTEM</label>

    <ul>
        <li> <a href="login.php"> LOG IN</a></li>
        <li> <a href="index.php"> HOME</a></li>
        <li> <a href="register.php"> REGISTER</a></li>
        <li> <a href="contact.php"> CONTACT</a></li>
    </ul>
   </nav>
        <center>
            <div class="form_design">
                <center class="title_design">

                    REGISTRATION FORM

                    
                </center>

            <form  action="" class="login_form" name="registrationForm" onsubmit="return validateForm()">

                <div class="input-control">
                    <label class="label_design" for="usertype">User Type</label>
                    <select name="usertype" id="usertype">
            <option value="taxpayer">Taxpayer</option>
            <option value="employer">Employer</option>
        </select>
                    <div class="error"></div>
                </div>

                <div class="input-control">
                    <label class="label_design" for="firstname">First Name</label>
                    <input type="text" name="firstname" id="firstname"  >
                    <div class="error"></div>
                </div>
                <div class="input-control">
                    <label class="label_design" for="secondname">Second Name</label>
                    <input type="text" name="secondname" id="secondname"  placeholder="enter your second name">
                    <div class="error"></div>
                </div >
                <div class="input-control">
                    <label class="label_design" for="phone">Phone number</label>
                    <input type="tel" name="phone" id="phone"  placeholder="enter your phone number">
                    <div class="error"></div>
                </div >
                <div class="input-control" for="id_number" >
                    <label class="label_design">ID number</label>
                    <input type="tel" name="id_number" id="id_number"  placeholder="enter your ID number">
                    <div class="error"></div>
                </div>
                
                
                <div class="input-control" for="email" >
                    <label class="label_design">Email address</label>
                    <input type="email" name="email" id="email"  placeholder="enter your email">
                    <div class="error"></div>
                </div>

                <div class="input-control" for="password">
                    <label class="label_design" >Password</label>
                    <input type="password" name="password" id="password"  placeholder="enter your password">
                    <div class="error"></div>
                </div>
                <div class="input-control" for="cpassword">
                    <label class="label_design" >Confirm Password</label>
                    <input type="password" name="cpassword" id="cpassword"  placeholder="confirm your password">
                    <div class="error"></div>
                <div>
                    <label class="label_design" ></label>
                   
                    <input class="login_button" type="submit" name="submit"  value="REGISTER"><br><br>
                </div>

                
                <div style="color:white;">
                    <p >Already a registered taxpayer? <a href="">Log in </a> </p>
                </div>
                
            </form>
            </div>
        </center>

        <script>
         
  const form = document.getElementById('form');
const username = document.getElementById('username');
const email = document.getElementById('email');
const password = document.getElementById('password');
const password2 = document.getElementById('password2');

form.addEventListener('submit', e => {
    e.preventDefault();

    validateInputs();
});

const setError = (element, message) => {
    const inputControl = element.parentElement;
    const errorDisplay = inputControl.querySelector('.error');

    errorDisplay.innerText = message;
    inputControl.classList.add('error');
    inputControl.classList.remove('success')
}

const setSuccess = element => {
    const inputControl = element.parentElement;
    const errorDisplay = inputControl.querySelector('.error');

    errorDisplay.innerText = '';
    inputControl.classList.add('success');
    inputControl.classList.remove('error');
};

const isValidEmail = email => {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

const validateInputs = () => {
    const usernameValue = username.value.trim();
    const emailValue = email.value.trim();
    const passwordValue = password.value.trim();
    const password2Value = password2.value.trim();

    if(usernameValue === '') {
        setError(username, 'Username is required');
    } else {
        setSuccess(username);
    }

    if(emailValue === '') {
        setError(email, 'Email is required');
    } else if (!isValidEmail(emailValue)) {
        setError(email, 'Provide a valid email address');
    } else {
        setSuccess(email);
    }

    if(passwordValue === '') {
        setError(password, 'Password is required');
    } else if (passwordValue.length < 8 ) {
        setError(password, 'Password must be at least 8 character.')
    } else {
        setSuccess(password);
    }

    if(password2Value === '') {
        setError(password2, 'Please confirm your password');
    } else if (password2Value !== passwordValue) {
        setError(password2, "Passwords doesn't match");
    } else {
        setSuccess(password2);
    }

};



        </script>

    </body>
</html>